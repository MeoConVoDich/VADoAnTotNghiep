// <auto-generated/>
#pragma warning disable 1591
#pragma warning disable 0414
#pragma warning disable 0649
#pragma warning disable 0169

namespace DoAnTotNghiep.Shared
{
    #line hidden
    using global::System;
    using global::System.Collections.Generic;
    using global::System.Linq;
    using global::System.Threading.Tasks;
    using global::Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\Admin\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Admin\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Admin\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Admin\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Admin\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Admin\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Admin\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\Admin\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\Admin\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using DoAnTotNghiep;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\Admin\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using DoAnTotNghiep.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\Admin\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using AntDesign;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\Admin\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using DoAnTotNghiep.Components;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\Users\Admin\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using DoAnTotNghiep.EditModel;

#line default
#line hidden
#nullable disable
#nullable restore
#line 1 "C:\Users\Admin\Documents\VADoAnTotNghiep\DoAnTotNghiep\Shared\MainLayout.razor"
using System.Security.Claims;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Admin\Documents\VADoAnTotNghiep\DoAnTotNghiep\Shared\MainLayout.razor"
using System.Threading;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Admin\Documents\VADoAnTotNghiep\DoAnTotNghiep\Shared\MainLayout.razor"
using Microsoft.Extensions.Configuration;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Admin\Documents\VADoAnTotNghiep\DoAnTotNghiep\Shared\MainLayout.razor"
using System.Net;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Admin\Documents\VADoAnTotNghiep\DoAnTotNghiep\Shared\MainLayout.razor"
using AutoMapper;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Admin\Documents\VADoAnTotNghiep\DoAnTotNghiep\Shared\MainLayout.razor"
using DoAnTotNghiep.Config;

#line default
#line hidden
#nullable disable
    public partial class MainLayout : LayoutComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
        }
        #pragma warning restore 1998
#nullable restore
#line 62 "C:\Users\Admin\Documents\VADoAnTotNghiep\DoAnTotNghiep\Shared\MainLayout.razor"
 

    protected async override Task OnInitializedAsync()
    {
        try
        {
            var authenticationState = await ((CustomAuthenticationStateProvider)AuthenticationStateProvider).GetAuthenticationStateAsync();
            if (authenticationState.User.Identity.IsAuthenticated)
            {

            }
            else
            {
                NavigationManager.NavigateTo("/");
            }

        }
        catch (Exception ex)
        {
            await Notice.Open(new NotificationConfig()
            {
                Message = "Thông báo",
                Description = ex.Message
            });
        }
    }
    public void Logout()
    {
        ((CustomAuthenticationStateProvider)AuthenticationStateProvider).MarkUserAsLoggedOut();
    }

    //public string GetLayoutStyle()
    //{
    //    return $"background-image: url('{Background}');";
    //}

    //protected override async Task OnAfterRenderAsync(bool firstRender)
    //{
    //    if (firstRender)
    //    {
    //        WindowSizeChanged(await Service.GetDimensions());
    //        browserServiceRef = DotNetObjectReference.Create<BrowserService>(Service);
    //        await Service.BindBrowserDimensionChange(browserServiceRef);
    //    }
    //}

    //async Task LoadUserInfoAsync(string userName)
    //{
    //    sessionData.User = await UserService.GetByUserNameAsync(new AppUserSearch { UserName = userName });
    //    if (sessionData.User == null || !sessionData.User.IsActive || sessionData.User.CompanyId.IsNullOrEmpty())
    //    {
    //        NavigationManager.NavigateTo(uri);
    //    }
    //    else
    //    {
    //        Error.SessionData = sessionData;
    //        sessionData.CompanyInfo = await CompanyInfoService.GetAsync(sessionData.User.CompanyId);
    //        var staffResult = await StaffProfileService.GetStaffByUserNameAsync(new SearchStaffCondition()
    //        {
    //            CompanyId = sessionData.User.CompanyId,
    //            UserName = sessionData.User.UserName
    //        });
    //        if (staffResult.Data?.Id.IsNotNullOrEmpty() == true)
    //        {
    //            sessionData.StaffProfile = staffResult.Data;
    //        }
    //    }
    //}

    //void OpenChangePasswordForm()
    //{
    //    changePasswordModel = new() { UserName = sessionData.User.UserName, Id = sessionData.User.Id };
    //    changePasswordVisible = true;
    //}

    //async Task OnPasswordChangedAsync(ChangePasswordModel model)
    //{
    //    changePasswordVisible = false;
    //    try
    //    {
    //        var result = await UserService.ChangePasswordAsync(model.Id, model.OldPassword, model.Password);
    //        if (result.State)
    //        {
    //            CloseChangePassword();
    //            Notice.NotiSuccess(AlertResource.ChangePasswordSuccessful);
    //        }
    //        else
    //        {
    //            Notice.NotiError(AlertResource.ChangePasswordFailed);
    //        }
    //    }
    //    catch (Exception ex)
    //    {
    //        Error.ProcessError(ex);
    //    }


    //}

    //void CloseChangePassword()
    //{
    //    changePasswordVisible = false;
    //}

    //async Task OpenDetailAsync()
    //{
    //    try
    //    {
    //        await appUserDetail.LoadEditModelAsync(sessionData.User);
    //        appUserDetail.DisableField();
    //        DetailVisible = true;
    //    }
    //    catch (Exception ex)
    //    {
    //        Error.ProcessError(ex);
    //    }
    //}

    //async Task SaveDetailAsync(AppUserEditModel model)
    //{
    //    try
    //    {
    //        if (model.Id.IsNullOrEmpty())
    //        {
    //            Notice.NotiWarning("Dữ liệu không hợp lệ");
    //            return;
    //        }
    //        var updateModel = Mapper.Map<AppUserData>(model);
    //        var result = await UserService.UpdateAsync(updateModel);
    //        if (result.State)
    //        {
    //            CloseDetail();
    //            Notice.NotiSuccess(AlertResource.UpdateSuccessful);
    //            await LoadUserInfoAsync(model.UserName);
    //        }
    //        else
    //        {
    //            Notice.NotiError(AlertResource.InvalidData);
    //        }

    //    }
    //    catch (Exception ex)
    //    {
    //        Error.ProcessError(ex);
    //    }
    //}

    //void CloseDetail()
    //{
    //    try
    //    {
    //        DetailVisible = false;
    //    }
    //    catch (Exception ex)
    //    {
    //        Error.ProcessError(ex);
    //    }
    //}

    //async Task OpenNewTab(MouseEventArgs e, string url = "")
    //{
    //    if (e.Button == 2)
    //    {
    //        await JSRuntime.InvokeVoidAsync("open", CancellationToken.None, url, "_blank");
    //    }
    //}

    //void WindowSizeChanged(BrowserDimension dimension)
    //{
    //    sessionData.BrowserDimension = dimension;
    //    StateHasChanged();
    //}

    //async Task OpenICareAsync()
    //{
    //    try
    //    {

    //        var request = new RestRequest("/api/User/get-token").AddJsonBody(new { UserName = sessionData.User.UserName, Password = sessionData.User.UserName });
    //        request.Method = Method.Post;
    //        request.Timeout = 15;
    //        request.AddHeader("ApiKey", Configuration[GlobalVariants.HrmApiKey]);
    //        var data = await RestClient.ExecuteAsync<ExcuteResult<string>>(request);
    //        if (data.Data?.Code == ResultCode.SuccessResult)
    //        {
    //            icareInited = true;
    //            tokenAuth = data.Data.Result?.ToString();
    //            string url = string.Format(Configuration[GlobalVariants.ICareUrl], tokenAuth);
    //            await JSRuntime.InvokeVoidAsync("open", CancellationToken.None, url, "_blank");
    //        }
    //        else
    //        {
    //            Notice.NotiError("Tài khoản chưa được cấu hình sử dụng dịch vụ ICare");
    //            return;
    //        }

    //    }
    //    catch (Exception)
    //    {
    //    }
    //}


#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NotificationService Notice { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private AuthenticationStateProvider AuthenticationStateProvider { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IConfiguration Configuration { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime JSRuntime { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IMapper Mapper { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager NavigationManager { get; set; }
    }
}
#pragma warning restore 1591
