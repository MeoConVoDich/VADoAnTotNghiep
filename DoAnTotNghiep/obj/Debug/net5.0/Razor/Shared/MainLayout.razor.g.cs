#pragma checksum "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\Shared\MainLayout.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "105e9df18447c4354c1d6030e2d36170805ce972"
// <auto-generated/>
#pragma warning disable 1591
namespace DoAnTotNghiep.Shared
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using DoAnTotNghiep;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using DoAnTotNghiep.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using AntDesign;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using DoAnTotNghiep.Components;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using DoAnTotNghiep.EditModel;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using DoAnTotNghiep.Domain;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\_Imports.razor"
using DoAnTotNghiep.ViewModel;

#line default
#line hidden
#nullable disable
#nullable restore
#line 1 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\Shared\MainLayout.razor"
using System.Security.Claims;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\Shared\MainLayout.razor"
using System.Threading;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\Shared\MainLayout.razor"
using Microsoft.Extensions.Configuration;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\Shared\MainLayout.razor"
using System.Net;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\Shared\MainLayout.razor"
using AutoMapper;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\Shared\MainLayout.razor"
using DoAnTotNghiep.Config;

#line default
#line hidden
#nullable disable
    public partial class MainLayout : LayoutComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "div");
            __builder.AddAttribute(1, "class", "page");
            __builder.AddAttribute(2, "b-wfoac75yhr");
            __builder.OpenElement(3, "div");
            __builder.AddAttribute(4, "class", "sidebar");
            __builder.AddAttribute(5, "b-wfoac75yhr");
            __builder.OpenComponent<DoAnTotNghiep.Shared.NavMenu>(6);
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.AddMarkupContent(7, "\r\n\r\n    ");
            __builder.OpenElement(8, "div");
            __builder.AddAttribute(9, "class", "main");
            __builder.AddAttribute(10, "b-wfoac75yhr");
            __builder.OpenElement(11, "div");
            __builder.AddAttribute(12, "class", "menu");
            __builder.AddAttribute(13, "b-wfoac75yhr");
            __builder.OpenElement(14, "div");
            __builder.AddAttribute(15, "b-wfoac75yhr");
#nullable restore
#line 24 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\Shared\MainLayout.razor"
                 if (NavigationManager.Uri.StartsWith(NavigationManager.BaseUri + "he-thong"))
                {

#line default
#line hidden
#nullable disable
            __builder.OpenComponent<DoAnTotNghiep.Shared.SystemMenu>(16);
            __builder.CloseComponent();
#nullable restore
#line 27 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\Shared\MainLayout.razor"
                }
                else if (NavigationManager.Uri.StartsWith(NavigationManager.BaseUri + "ca-nhan"))
                {

#line default
#line hidden
#nullable disable
            __builder.OpenComponent<DoAnTotNghiep.Shared.StaffMenu>(17);
            __builder.CloseComponent();
#nullable restore
#line 31 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\Shared\MainLayout.razor"
                }
                else if (NavigationManager.Uri.StartsWith(NavigationManager.BaseUri + "cham-cong"))
                {

#line default
#line hidden
#nullable disable
            __builder.OpenComponent<DoAnTotNghiep.Shared.TimekeepingMenu>(18);
            __builder.CloseComponent();
#nullable restore
#line 35 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\Shared\MainLayout.razor"
                }
                else if (NavigationManager.Uri.StartsWith(NavigationManager.BaseUri + "luong"))
                {
                    //<SalaryMenu></SalaryMenu>
                }
                else if (NavigationManager.Uri.StartsWith(NavigationManager.BaseUri + "thong-tin-nhan-su"))
                {

#line default
#line hidden
#nullable disable
            __builder.OpenComponent<DoAnTotNghiep.Shared.StaffInfoMenu>(19);
            __builder.CloseComponent();
#nullable restore
#line 43 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\Shared\MainLayout.razor"
                }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(20, "\r\n            ");
            __builder.OpenElement(21, "div");
            __builder.AddAttribute(22, "b-wfoac75yhr");
            __builder.OpenComponent<Microsoft.AspNetCore.Components.Authorization.AuthorizeView>(23);
            __builder.AddAttribute(24, "Authorized", (Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Authorization.AuthenticationState>)((context) => (__builder2) => {
                __builder2.OpenElement(25, "a");
                __builder2.AddAttribute(26, "href", "/");
                __builder2.AddAttribute(27, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 48 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\Shared\MainLayout.razor"
                                              (() => Logout())

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(28, "b-wfoac75yhr");
                __builder2.AddContent(29, "Logout");
                __builder2.CloseElement();
            }
            ));
            __builder.AddAttribute(30, "NotAuthorized", (Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Authorization.AuthenticationState>)((context) => (__builder2) => {
                __builder2.AddMarkupContent(31, "<a href=\"/\" b-wfoac75yhr>Login</a>");
            }
            ));
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(32, "\r\n        ");
            __builder.OpenElement(33, "div");
            __builder.AddAttribute(34, "class", "content px-4");
            __builder.AddAttribute(35, "b-wfoac75yhr");
            __builder.AddContent(36, 
#nullable restore
#line 57 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\Shared\MainLayout.razor"
             Body

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#nullable restore
#line 62 "C:\Users\Win10Pro\Documents\VADoAnTotNghiep\DoAnTotNghiep\Shared\MainLayout.razor"
 

    protected async override Task OnInitializedAsync()
    {
        try
        {
            var authenticationState = await ((CustomAuthenticationStateProvider)AuthenticationStateProvider).GetAuthenticationStateAsync();
            if (authenticationState.User.Identity.IsAuthenticated)
            {

            }
            else
            {
                NavigationManager.NavigateTo("/");
            }

        }
        catch (Exception ex)
        {
            await Notice.Open(new NotificationConfig()
            {
                Message = "Thông báo",
                Description = ex.Message
            });
        }
    }
    public void Logout()
    {
        ((CustomAuthenticationStateProvider)AuthenticationStateProvider).MarkUserAsLoggedOut();
    }

    //public string GetLayoutStyle()
    //{
    //    return $"background-image: url('{Background}');";
    //}

    //protected override async Task OnAfterRenderAsync(bool firstRender)
    //{
    //    if (firstRender)
    //    {
    //        WindowSizeChanged(await Service.GetDimensions());
    //        browserServiceRef = DotNetObjectReference.Create<BrowserService>(Service);
    //        await Service.BindBrowserDimensionChange(browserServiceRef);
    //    }
    //}

    //async Task LoadUserInfoAsync(string userName)
    //{
    //    sessionData.User = await UserService.GetByUserNameAsync(new AppUserSearch { UserName = userName });
    //    if (sessionData.User == null || !sessionData.User.IsActive || sessionData.User.CompanyId.IsNullOrEmpty())
    //    {
    //        NavigationManager.NavigateTo(uri);
    //    }
    //    else
    //    {
    //        Error.SessionData = sessionData;
    //        sessionData.CompanyInfo = await CompanyInfoService.GetAsync(sessionData.User.CompanyId);
    //        var staffResult = await StaffProfileService.GetStaffByUserNameAsync(new SearchStaffCondition()
    //        {
    //            CompanyId = sessionData.User.CompanyId,
    //            UserName = sessionData.User.UserName
    //        });
    //        if (staffResult.Data?.Id.IsNotNullOrEmpty() == true)
    //        {
    //            sessionData.StaffProfile = staffResult.Data;
    //        }
    //    }
    //}

    //void OpenChangePasswordForm()
    //{
    //    changePasswordModel = new() { UserName = sessionData.User.UserName, Id = sessionData.User.Id };
    //    changePasswordVisible = true;
    //}

    //async Task OnPasswordChangedAsync(ChangePasswordModel model)
    //{
    //    changePasswordVisible = false;
    //    try
    //    {
    //        var result = await UserService.ChangePasswordAsync(model.Id, model.OldPassword, model.Password);
    //        if (result.State)
    //        {
    //            CloseChangePassword();
    //            Notice.NotiSuccess(AlertResource.ChangePasswordSuccessful);
    //        }
    //        else
    //        {
    //            Notice.NotiError(AlertResource.ChangePasswordFailed);
    //        }
    //    }
    //    catch (Exception ex)
    //    {
    //        Error.ProcessError(ex);
    //    }


    //}

    //void CloseChangePassword()
    //{
    //    changePasswordVisible = false;
    //}

    //async Task OpenDetailAsync()
    //{
    //    try
    //    {
    //        await appUserDetail.LoadEditModelAsync(sessionData.User);
    //        appUserDetail.DisableField();
    //        DetailVisible = true;
    //    }
    //    catch (Exception ex)
    //    {
    //        Error.ProcessError(ex);
    //    }
    //}

    //async Task SaveDetailAsync(AppUserEditModel model)
    //{
    //    try
    //    {
    //        if (model.Id.IsNullOrEmpty())
    //        {
    //            Notice.NotiWarning("Dữ liệu không hợp lệ");
    //            return;
    //        }
    //        var updateModel = Mapper.Map<AppUserData>(model);
    //        var result = await UserService.UpdateAsync(updateModel);
    //        if (result.State)
    //        {
    //            CloseDetail();
    //            Notice.NotiSuccess(AlertResource.UpdateSuccessful);
    //            await LoadUserInfoAsync(model.UserName);
    //        }
    //        else
    //        {
    //            Notice.NotiError(AlertResource.InvalidData);
    //        }

    //    }
    //    catch (Exception ex)
    //    {
    //        Error.ProcessError(ex);
    //    }
    //}

    //void CloseDetail()
    //{
    //    try
    //    {
    //        DetailVisible = false;
    //    }
    //    catch (Exception ex)
    //    {
    //        Error.ProcessError(ex);
    //    }
    //}

    //async Task OpenNewTab(MouseEventArgs e, string url = "")
    //{
    //    if (e.Button == 2)
    //    {
    //        await JSRuntime.InvokeVoidAsync("open", CancellationToken.None, url, "_blank");
    //    }
    //}

    //void WindowSizeChanged(BrowserDimension dimension)
    //{
    //    sessionData.BrowserDimension = dimension;
    //    StateHasChanged();
    //}

    //async Task OpenICareAsync()
    //{
    //    try
    //    {

    //        var request = new RestRequest("/api/User/get-token").AddJsonBody(new { UserName = sessionData.User.UserName, Password = sessionData.User.UserName });
    //        request.Method = Method.Post;
    //        request.Timeout = 15;
    //        request.AddHeader("ApiKey", Configuration[GlobalVariants.HrmApiKey]);
    //        var data = await RestClient.ExecuteAsync<ExcuteResult<string>>(request);
    //        if (data.Data?.Code == ResultCode.SuccessResult)
    //        {
    //            icareInited = true;
    //            tokenAuth = data.Data.Result?.ToString();
    //            string url = string.Format(Configuration[GlobalVariants.ICareUrl], tokenAuth);
    //            await JSRuntime.InvokeVoidAsync("open", CancellationToken.None, url, "_blank");
    //        }
    //        else
    //        {
    //            Notice.NotiError("Tài khoản chưa được cấu hình sử dụng dịch vụ ICare");
    //            return;
    //        }

    //    }
    //    catch (Exception)
    //    {
    //    }
    //}


#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NotificationService Notice { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private AuthenticationStateProvider AuthenticationStateProvider { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IConfiguration Configuration { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime JSRuntime { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IMapper Mapper { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager NavigationManager { get; set; }
    }
}
#pragma warning restore 1591
