<Row Gutter="8">
    <Space Size="@("small")" Style="margin-right: 10px">
        @if (CreatorObject == CreatorObject.Staff)
        {
            @if (editModel.ReadOnly)
            {
                <SpaceItem>
                    <Button Type="@ButtonType.Primary" Color="Color.Green7" OnClick="AddAsync">Thêm mới</Button>
                </SpaceItem>
            }
            @if (!editModel.ReadOnly)
            {
                <SpaceItem>
                    <Button Type="@ButtonType.Primary" OnClick="SaveAsync" Color="@Color.Green7">Gửi phê duyệt</Button>
                </SpaceItem>
                <SpaceItem>
                    <Popconfirm OnConfirm="() => CancelAsync()"
                                OkText="Đồng ý"
                                CancelText="Hủy">
                        <ChildContent>
                            <Button Type="@ButtonType.Primary" Danger>Hủy</Button>
                        </ChildContent>
                        <TitleTemplate>
                            Bạn có chắc chắn muốn hủy thao tác, các dữ liệu có thể sẽ không được lưu?
                        </TitleTemplate>
                    </Popconfirm>
                </SpaceItem>
            }
        }
        else
        {
            if (editModel.CreatorObject == CreatorObject.HRStaff)
            {
                @if (editModel.ReadOnly)
                {
                    <SpaceItem>
                        <Button Type="@ButtonType.Primary" OnClick="Edit">Sửa</Button>
                    </SpaceItem>
                }
            }
            @if (!editModel.ReadOnly)
            {

                <SpaceItem>
                    <Button Type="@ButtonType.Primary" OnClick="SaveAsync" Color="@Color.Green7">Lưu</Button>
                </SpaceItem>
                <SpaceItem>
                    <Popconfirm OnConfirm="() => CancelAsync()"
                                OkText="Đồng ý"
                                CancelText="Hủy">
                        <ChildContent>
                            <Button Type="@ButtonType.Primary" Danger>Hủy</Button>
                        </ChildContent>
                        <TitleTemplate>
                            Bạn có chắc chắn muốn hủy thao tác, các dữ liệu có thể sẽ không được lưu?
                        </TitleTemplate>
                    </Popconfirm>
                </SpaceItem>
            }
            @if (editModel.ReadOnly)
            {
                @if (editModel.ApprovalStatus == ApprovalStatus.Pending)
                {
                    <SpaceItem>
                        <Button Icon="save" Type="@ButtonType.Primary" OnClick="() => OpenApprovedModal.InvokeAsync(selectModel)">Phê duyệt</Button>
                    </SpaceItem>
                    <SpaceItem>
                        <Button Icon="save" Type="@ButtonType.Primary" OnClick="() => OpenDeclinedModal.InvokeAsync(selectModel)" Danger>Không phê duyệt</Button>
                    </SpaceItem>
                }
                @if (editModel.ApprovalStatus == ApprovalStatus.Approved)
                {
                    <SpaceItem>
                        <Button Icon="save" Type="@ButtonType.Primary" OnClick="() => OpenCancelApproveModal.InvokeAsync(selectModel)" Danger>Huỷ phê duyệt</Button>
                    </SpaceItem>
                }
            }
        }
    </Space>
</Row>
<EditForm Model="editModel">
    <DataAnnotationsValidator />
    <InputWatcher @ref="inputWatcher"></InputWatcher>
    <Row Gutter="8">
        @if (CreatorObject == CreatorObject.HRStaff)
        {
            <AntDesign.Col Span="12">
                <LabelFor For="() => editModel.StaffName" HasRequired="true"></LabelFor>
                @if (!editModel.ReadOnly)
                {
                    <Select DataSource="@StaffSearchDatas"
                            LabelName="@nameof(Users.Name)"
                            ValueName="@nameof(Users.Id)"
                            TItemValue="string" TItem="Users" Placeholder="Tìm kiếm"
                            Value="@editModel.UsersId" EnableSearch EnableVirtualization="true"
                            OnSearch="e => OnStaffSearch(e)"
                            ValueChanged="e => StaffChange(e)">
                        <ItemTemplate Context="selectedContext">
                            <StaffProfileOption Model="selectedContext" />
                        </ItemTemplate>
                    </Select>
                }
                else
                {
                    <Input Value="editModel.StaffName" Disabled />
                }
                <ValidationMessage For="() => editModel.StaffName"></ValidationMessage>
            </AntDesign.Col>
            <AntDesign.Col Span="12">
                <LabelFor For="() => editModel.StaffCode" HasRequired="true"></LabelFor>
                <Input @bind-Value="editModel.StaffCode" Disabled />
                <ValidationMessage For="() => editModel.StaffCode"></ValidationMessage>
            </AntDesign.Col>
        }
        <AntDesign.Col Span="12">
            <LabelFor FieldIdentifier="context.Field(nameof(VacationEditModel.StartDate))"></LabelFor>
            <TimePicker TValue="DateTime?" @bind-Value="editModel.StartDate" Disabled="true" Format="dd/MM/yyyy" Style="display:block"
                        OnChange="editModel.TimeCalculator" Placeholder=@("Chọn ngày")></TimePicker>
            <ValidationMessage For="() => editModel.StartDate"></ValidationMessage>
        </AntDesign.Col>
        <AntDesign.Col Span="12">
            <LabelFor FieldIdentifier="context.Field(nameof(VacationEditModel.EndDate))"></LabelFor>
            <TimePicker TValue="DateTime?" @bind-Value="editModel.EndDate" Disabled="true" Format="dd/MM/yyyy" Style="display:block"
                        OnChange="editModel.TimeCalculator" Placeholder=@("Chọn ngày")></TimePicker>
            <ValidationMessage For="() => editModel.EndDate"></ValidationMessage>
        </AntDesign.Col>
        <AntDesign.Col Span="12">
            <LabelFor FieldIdentifier="context.Field(nameof(VacationEditModel.TimekeepingTypeId))" HasRequired="true"></LabelFor>
            <Select DataSource="@TimekeepingTypes"
                    @bind-Value="@editModel.TimekeepingTypeId"
                    LabelName="@nameof(TimekeepingType.CodeName)"
                    ValueName="@nameof(TimekeepingType.Code)"
                    Placeholder="Kiểu công"
                    AllowClear
                    EnableSearch TItem="TimekeepingType" TItemValue="string"
                    Disabled="editModel.ReadOnly">
            </Select>
            <ValidationMessage For="() => editModel.TimekeepingTypeId"></ValidationMessage>
        </AntDesign.Col>
        <AntDesign.Col Span="12">
            <LabelFor FieldIdentifier="context.Field(nameof(VacationEditModel.ChooseBreak))"></LabelFor>
            <Select TItemValue="string" TItem="string" Disabled="editModel.ReadOnly"
                    Value="@editModel?.ChooseBreak.ToString()" EnableSearch
                    OnSelectedItemChanged="e => editModel.SetValue(editModel.Property.NameProperty(c => c.ChooseBreak), e)">
                <SelectOptions>
                    @foreach (var item in editModel.DataSource[editModel.Property.NameProperty(c => c.ChooseBreak)])
                    {
                        <SelectOption TItemValue="string" TItem="string" Value="@item.Key" Label="@item.Value?.GetDisplay()" />
                    }
                </SelectOptions>
            </Select>
            <ValidationMessage For="() => editModel.ChooseBreak"></ValidationMessage>
        </AntDesign.Col>
        <AntDesign.Col Span="12">
            <LabelFor FieldIdentifier="context.Field(nameof(VacationEditModel.NumberOfDays))"></LabelFor>
            <AntDesign.InputNumber @bind-Value="editModel.NumberOfDays" Disabled="true"></AntDesign.InputNumber>
            <ValidationMessage For="() => editModel.NumberOfDays"></ValidationMessage>
        </AntDesign.Col>
    </Row>
</EditForm>